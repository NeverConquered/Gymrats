<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>GymRats - User Dashboard</title>
        <link rel="stylesheet" type="text/css" href="/userdashboard/userdashboard.css" />
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/js/all.min.js"></script>
    </head>
    <body>
        <div class="main-navbar">
            <header>
                <!-- Header Branding - link to dashboard instead of home -->
                <div class="brand-logo">
                    <a href="/userdashboard_p" class="brand-name">GymRats</a>
                </div>
                
                <div class="nav-menu">
                    <a href="/userdashboard_p">Home</a>
                    <a href="/user_exercises">Exercises</a>
                    <a href="/user_nutrition">Nutrition</a>
                </div>
                
                <div class="right-container">
                    <div class="search-container">
                        <img src="/userdashboard/icons8-search.svg" height="18px" alt="Search Icon" />
                        <input type="text" placeholder="Search..." size="20" style="font-size: 14px;" />
                    </div>
                    
                    <div class="user-profile">
                        <a href="/userprofile" class="active">
                            <span><%= user.full_name.split(' ')[0] %></span>
                        </a>
                    </div>
                </div>
                <div class="mobile-menu-icon" id="menuIcon">
                    <img src="/userdashboard/menu.jpg" alt="Menu" height="25px" />
                </div>
                <div class="mobile-sidebar" id="sideNavbar">
                    <a href="javascript:void(0)" class="close-button" id="closeBtn">&times;</a>
                    <a href="/userdashboard_p">Home</a>
                    <a href="/user_exercises">Exercises</a>
                    <a href="/user_nutrition">Nutrition</a>
                    <div class="sidebar-profile">
                        <span><%= user.full_name.split(' ')[0] %></span>
                    </div>
                </div>
            </header>
        </div>
        
        <!-- Dashboard Hero Section -->
        <section class="dashboard-hero">
            <div class="dashboard-hero-content">
                <h1>Welcome back, <%= user.full_name.split(' ')[0] %></h1>
                <p>Track your progress and stay on top of your fitness goals</p>
            </div>
        </section>

        <!-- Dashboard Content -->
        <div class="dashboard-container">
            <!-- Dashboard Overview -->
            <div class="dashboard-overview">
                <div class="overview-card">
                    <div class="overview-icon">
                        <i class="fas fa-fire"></i>
                    </div>
                    <div class="overview-details">
                        <h3>Today's Calories</h3>
                        <p class="overview-value">1,850 / 2,200</p>
                    </div>
                </div>
                
                <div class="overview-card">
                    <div class="overview-icon">
                        <i class="fas fa-dumbbell"></i>
                    </div>
                    <div class="overview-details">
                        <h3>Workouts Completed</h3>
                        <p class="overview-value">4 / 5 this week</p>
                    </div>
                </div>
                
                <div class="overview-card">
                    <div class="overview-icon">
                        <i class="fas fa-utensils"></i>
                    </div>
                    <div class="overview-details">
                        <h3>Protein Intake</h3>
                        <p class="overview-value">85g / 90g</p>
                    </div>
                </div>
                
                <div class="overview-card">
                    <div class="overview-icon">
                        <i class="fas fa-weight"></i>
                    </div>
                    <div class="overview-details">
                        <h3>Current Weight</h3>
                        <p class="overview-value">75 kg</p>
                    </div>
                </div>
            </div>
            
            <div class="dashboard-grid">
                <!-- Today's Workout Section -->
                <div class="dashboard-card">
                    <div class="card-header">
                        <h2>Today's Workout: HIIT</h2>
                        <span class="badge">60 min</span>
                    </div>
                    <div class="workout-content">
                        <div class="workout-progress">
                            <div class="progress-circle">
                                <svg viewBox="0 0 36 36" class="circular-chart">
                                    <path class="circle-bg" d="M18 2.0845
                                        a 15.9155 15.9155 0 0 1 0 31.831
                                        a 15.9155 15.9155 0 0 1 0 -31.831" />
                                    <path class="circle" stroke-dasharray="75, 100" d="M18 2.0845
                                        a 15.9155 15.9155 0 0 1 0 31.831
                                        a 15.9155 15.9155 0 0 1 0 -31.831" />
                                    <text x="18" y="20.35" class="percentage">75%</text>
                                </svg>
                            </div>
                            <p>3 of 4 exercises completed</p>
                        </div>
                        
                        <h3>Exercises:</h3>
                        <ul class="workout-list">
                            <li class="completed">
                                <span class="exercise-name">Burpees</span>
                                <span class="exercise-details">3 sets * 15 reps</span>
                            </li>
                            <li class="completed">
                                <span class="exercise-name">Squats</span>
                                <span class="exercise-details">4 sets * 20 reps</span>
                            </li>
                            <li class="completed">
                                <span class="exercise-name">Mountain Climbers</span>
                                <span class="exercise-details">3 sets * 30 seconds</span>
                            </li>
                            <li>
                                <span class="exercise-name">Jumping Jacks</span>
                                <span class="exercise-details">4 sets * 30 seconds</span>
                            </li>
                        </ul>
                        
                        <button class="workout-btn">Complete Workout</button>
                    </div>
                </div>

                <!-- Online Class Card -->
                <div class="dashboard-card">
                    <div class="card-header">
                        <h2>Upcoming Class</h2>
                        <span class="badge">Today</span>
                    </div>
                    <div class="class-content">
                        <div class="class-details">
                            <div class="class-time">
                                <span class="time">6:00 PM</span>
                                <span class="date">March 17, 2025</span>
                            </div>
                            <div class="class-info">
                                <h3>HIIT Intensity</h3>
                                <p>with Coach Sarah</p>
                            </div>
                        </div>
                        
                        <div class="class-description">
                            <p>High-intensity interval training designed to maximize calorie burn and improve cardiovascular fitness. Suitable for all levels.</p>
                        </div>
                        
                        <div class="class-checklist">
                            <h4>Prepare for class:</h4>
                            <ul>
                                <li>Clear workout space</li>
                                <li>Water bottle ready</li>
                                <li>Test camera and microphone</li>
                            </ul>
                        </div>
                        
                        <a href="https://meet.google.com/abc-defg-hij" class="class-join-btn" target="_blank">
                            <i class="fas fa-video"></i> Join Class
                        </a>
                    </div>
                </div>
            </div>

            <!-- Stats Section -->
            <div class="dashboard-wide-card">
                <div class="card-header">
                    <h2>Progress Tracking</h2>
                    <div class="card-actions">
                        <select id="exerciseSelect" class="select-dropdown">
                            <option value="all">All Exercises</option>
                            <option value="bicep">Bicep Curls</option>
                            <option value="deadlift">Deadlift</option>
                            <option value="bench">Bench Press</option>
                        </select>
                        <select id="timeframeSelect" class="select-dropdown">
                            <option value="month">Last Month</option>
                            <option value="3months">Last 3 Months</option>
                            <option value="6months">Last 6 Months</option>
                            <option value="year">Last Year</option>
                        </select>
                    </div>
                </div>
                
                <div class="stats-content">
                    <div class="stats-container">
                        <div class="stat-item">
                            <div class="stat-label">Bicep Curls</div>
                            <div class="stat-progress">
                                <div class="progress-bar">
                                    <div class="progress" style="width: 80%"></div>
                                </div>
                                <div class="stat-values">
                                    <span class="current-value">10 kg</span>
                                    <span class="goal-value">12 kg goal</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="stat-item">
                            <div class="stat-label">Deadlift</div>
                            <div class="stat-progress">
                                <div class="progress-bar">
                                    <div class="progress" style="width: 70%"></div>
                                </div>
                                <div class="stat-values">
                                    <span class="current-value">100 kg</span>
                                    <span class="goal-value">140 kg goal</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="stat-item">
                            <div class="stat-label">Bench Press</div>
                            <div class="stat-progress">
                                <div class="progress-bar">
                                    <div class="progress" style="width: 60%"></div>
                                </div>
                                <div class="stat-values">
                                    <span class="current-value">60 kg</span>
                                    <span class="goal-value">100 kg goal</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="chart-container">
                        <canvas id="exerciseChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Nutrition Section -->
            <div class="dashboard-wide-card">
                <div class="card-header">
                    <h2>Nutrition Tracking</h2>
                    <span class="badge">Today</span>
                </div>
                
                <div class="nutrition-content">
                    <div class="nutrition-overview">
                        <div class="calorie-tracker">
                            <div class="calorie-chart">
                                <canvas id="calorieChart"></canvas>
                            </div>
                            <div class="calorie-info">
                                <h3>Daily Calories</h3>
                                <div class="calorie-numbers">
                                    <span class="current-calories">1,850</span>
                                    <span class="divider">/</span>
                                    <span class="goal-calories">2,200</span>
                                </div>
                                <p>350 calories left</p>
                            </div>
                        </div>
                        
                        <div class="macro-breakdown">
                            <h3>Macronutrients</h3>
                            <div class="macro-chart">
                                <canvas id="nutritionChart"></canvas>
                            </div>
                        </div>
                    </div>
                    
                    <div class="nutrition-recommendations">
                        <h3>Recommended Protein Sources</h3>
                        <div class="food-items">
                            <div class="food-item">
                                <div class="food-icon">
                                    <i class="fas fa-drumstick-bite"></i>
                                </div>
                                <div class="food-details">
                                    <h4>Grilled Chicken Breast</h4>
                                    <p>31g protein per 100g</p>
                                </div>
                            </div>
                            
                            <div class="food-item">
                                <div class="food-icon">
                                    <i class="fas fa-egg"></i>
                                </div>
                                <div class="food-details">
                                    <h4>Whole Eggs</h4>
                                    <p>13g protein per 2 eggs</p>
                                </div>
                            </div>
                            
                            <div class="food-item">
                                <div class="food-icon">
                                    <i class="fas fa-seedling"></i>
                                </div>
                                <div class="food-details">
                                    <h4>Tofu (Firm)</h4>
                                    <p>20g protein per 100g</p>
                                </div>
                            </div>
                            
                            <div class="food-item">
                                <div class="food-icon">
                                    <i class="fas fa-fish"></i>
                                </div>
                                <div class="food-details">
                                    <h4>Salmon</h4>
                                    <p>25g protein per 100g</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="site-footer">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>GymRats</h3>
                    <ul>
                        <li><a href="/about">About Us</a></li>
                        <li><a href="/trainers">Our Trainers</a></li>
                        <li><a href="/testimonial">Testimonials</a></li>
                        <li><a href="/blog">Blog</a></li>
                    </ul>
                </div>

                <div class="footer-column">
                    <h3>Resources</h3>
                    <ul>
                        <li><a href="/isolation">Exercise Guide</a></li>
                        <li><a href="/nutrition">Nutrition Tips</a></li>
                        <li><a href="/workout_plans">Workout Plans</a></li>
                        <li><a href="/calculators">Calculators</a></li>
                    </ul>
                </div>

                <div class="footer-column">
                    <h3>Support</h3>
                    <ul>
                        <li><a href="/contact">Contact Us</a></li>
                        <li><a href="/about">About us</a></li>
                        <li><a href="/terms">Terms of Service</a></li>
                        <li><a href="/privacy_policy">Privacy Policy</a></li>
                    </ul>
                </div>

                <div class="footer-column">
                    <h3>Connect With Us</h3>
                    <ul>
                        <li><a href="/login_signup">Become a Trainer</a></li>
                        <li><a href="/verifier_login">Become a Verifier</a></li>
                    </ul>
                    <div class="social-icons">
                        <a href="#"><img src="/userdashboard/icons8-facebook.svg" alt="Facebook"></a>
                        <a href="#"><img src="/userdashboard/icons8-instagram.svg" alt="Instagram"></a>
                        <a href="#"><img src="/userdashboard/icons8-youtube.svg" alt="YouTube"></a>
                    </div>
                    <p class="copyright">GymRats © 2025. All rights reserved.</p>
                </div>
            </div>
        </footer>

        <script>
            document.addEventListener('DOMContentLoaded', function() {
                // Mobile menu toggle
                document.getElementById('menuIcon').addEventListener('click', function() {
                    document.getElementById('sideNavbar').classList.add('open');
                });

                document.getElementById('closeBtn').addEventListener('click', function() {
                    document.getElementById('sideNavbar').classList.remove('open');
                });

                // Exercise Progress Chart
                const exerciseCtx = document.getElementById('exerciseChart').getContext('2d');
                const exerciseChart = new Chart(exerciseCtx, {
                    type: 'line',
                    data: {
                        labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4', 'Week 5', 'Week 6'],
                        datasets: [
                            {
                                label: 'Bicep Curls (kg)',
                                data: [5, 6, 7, 8, 9, 10],
                                borderColor: '#8A2BE2',
                                backgroundColor: 'rgba(138, 43, 226, 0.1)',
                                tension: 0.3,
                                fill: true
                            },
                            {
                                label: 'Deadlift (kg)',
                                data: [60, 70, 75, 85, 95, 100],
                                borderColor: '#32CD32',
                                backgroundColor: 'rgba(50, 205, 50, 0.1)',
                                tension: 0.3,
                                fill: true
                            },
                            {
                                label: 'Bench Press (kg)',
                                data: [40, 45, 48, 52, 55, 60],
                                borderColor: '#FF6347',
                                backgroundColor: 'rgba(255, 99, 71, 0.1)',
                                tension: 0.3,
                                fill: true
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'top',
                                labels: {
                                    color: '#f1f1f1'
                                }
                            },
                            title: {
                                display: true,
                                text: 'Exercise Progress Over Time',
                                color: '#f1f1f1',
                                font: {
                                    size: 16
                                }
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: {
                                    color: '#f1f1f1'
                                },
                                grid: {
                                    color: 'rgba(255, 255, 255, 0.1)'
                                }
                            },
                            x: {
                                ticks: {
                                    color: '#f1f1f1'
                                },
                                grid: {
                                    color: 'rgba(255, 255, 255, 0.1)'
                                }
                            }
                        }
                    }
                });

                // Nutrition Chart
                const nutritionCtx = document.getElementById('nutritionChart').getContext('2d');
                const nutritionChart = new Chart(nutritionCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Protein', 'Carbs', 'Fats'],
                        datasets: [{
                            data: [35, 45, 20],
                            backgroundColor: [
                                '#8A2BE2', 
                                '#32CD32',
                                '#FF6347'
                            ],
                            hoverOffset: 4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom',
                                labels: {
                                    color: '#f1f1f1'
                                }
                            }
                        }
                    }
                });
                
                // Calorie Chart
                const calorieCtx = document.getElementById('calorieChart').getContext('2d');
                const calorieChart = new Chart(calorieCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Consumed', 'Remaining'],
                        datasets: [{
                            data: [1850, 350],
                            backgroundColor: [
                                '#8A2BE2', 
                                'rgba(255, 255, 255, 0.1)'
                            ],
                            borderWidth: 0,
                            hoverOffset: 4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        cutout: '75%',
                        plugins: {
                            legend: {
                                display: false
                            },
                            tooltip: {
                                enabled: true
                            }
                        }
                    }
                });
                
                // Complete workout button
                const workoutBtn = document.querySelector('.workout-btn');
                if (workoutBtn) {
                    workoutBtn.addEventListener('click', function() {
                        alert('Workout completed! Great job!');
                        
                        // In a real app, this would update the UI and save to a database
                        const exercises = document.querySelectorAll('.workout-list li');
                        exercises.forEach(exercise => {
                            exercise.classList.add('completed');
                        });
                        
                        // Update progress circle
                        const circlePath = document.querySelector('.circle');
                        circlePath.setAttribute('stroke-dasharray', '100, 100');
                        
                        const percentageText = document.querySelector('.percentage');
                        percentageText.textContent = '100%';
                        
                        // Disable button after completion
                        this.disabled = true;
                        this.textContent = 'Completed ✓';
                    });
                }
            });
        </script>
    </body>
</html>
